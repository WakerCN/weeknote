# WeekNote å¼€å‘æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•åœ¨æœ¬åœ°æ­å»ºå¼€å‘ç¯å¢ƒå¹¶å¯åŠ¨é¡¹ç›®ã€‚

---

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

| å·¥å…· | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|---------|------|
| Node.js | 18.xï¼ˆå¿…é¡»ï¼‰ | ä½¿ç”¨ nvm ç®¡ç†ç‰ˆæœ¬ |
| pnpm | >= 9.15 | åŒ…ç®¡ç†å™¨ |
| MongoDB | >= 6.0 | æ•°æ®åº“ |

### Node.js ç‰ˆæœ¬ç®¡ç†

```bash
# å®‰è£… Node 18
nvm install 18

# åˆ‡æ¢åˆ° Node 18
nvm use 18
```

> âš ï¸ å¦‚æœåŒæ—¶å®‰è£…äº† Homebrew çš„ Node.jsï¼Œå¯èƒ½é‡åˆ°ç‰ˆæœ¬å†²çªã€‚é¡¹ç›®çš„å¯åŠ¨è„šæœ¬å’Œ VS Code Tasks å·²å¤„ç†æ­¤é—®é¢˜ã€‚

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å¯åŠ¨ MongoDB

```bash
# macOS (Homebrew)
brew services start mongodb-community

# æˆ– Docker
docker run -d --name weeknote-mongo -p 27017:27017 mongo:latest
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cat > .env << 'EOF'
MONGODB_URI=mongodb://localhost:27017/weeknote
JWT_SECRET=your-random-secret-key-at-least-32-characters
PORT=3000
EOF
```

> ğŸ’¡ ç”Ÿæˆéšæœº JWT_SECRETï¼š`openssl rand -base64 32`

### 3. å¯åŠ¨æœåŠ¡

**æ–¹å¼ Aï¼šVS Code Tasksï¼ˆæ¨èï¼‰â­**

```
æŒ‰ Cmd + Shift + B
```

è‡ªåŠ¨å¯åŠ¨åç«¯å’Œå‰ç«¯ä¸¤ä¸ªç»ˆç«¯ã€‚

**æ–¹å¼ Bï¼šå¯åŠ¨è„šæœ¬**

```bash
./scripts/start-cloud.sh
```

**æ–¹å¼ Cï¼šMake å‘½ä»¤**

```bash
make dev
```

### 4. è®¿é—®åº”ç”¨

| æœåŠ¡ | åœ°å€ |
|------|------|
| å‰ç«¯ Web | http://localhost:5173 |
| åç«¯ API | http://localhost:3000 |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
weeknote/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/        # æ ¸å¿ƒé€»è¾‘ï¼ˆè§£æã€ç”Ÿæˆã€æé†’ï¼‰
â”‚   â”œâ”€â”€ server/      # åç«¯ APIï¼ˆExpress + MongoDBï¼‰
â”‚   â”œâ”€â”€ web/         # å‰ç«¯åº”ç”¨ï¼ˆReact + Viteï¼‰
â”‚   â””â”€â”€ cli/         # å‘½ä»¤è¡Œå·¥å…·ï¼ˆå­˜æ¡£ï¼‰
â”œâ”€â”€ scripts/         # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docs/            # æ–‡æ¡£
â””â”€â”€ .vscode/         # VS Code é…ç½®
```

---

## âŒ¨ï¸ VS Code Tasks

é¡¹ç›®é…ç½®äº† `.vscode/tasks.json`ï¼Œå®šä¹‰äº†å¸¸ç”¨çš„å¼€å‘ä»»åŠ¡ã€‚

### å¯ç”¨ä»»åŠ¡

| ä»»åŠ¡å | å¿«æ·é”® | åŠŸèƒ½ |
|--------|--------|------|
| `Dev: Start All` | `Cmd + Shift + B` | ğŸš€ åŒæ—¶å¯åŠ¨åç«¯å’Œå‰ç«¯ |
| `Start: Server` | æ‰‹åŠ¨é€‰æ‹© | ğŸ”µ ä»…å¯åŠ¨åç«¯ (3000) |
| `Start: Web` | æ‰‹åŠ¨é€‰æ‹© | ğŸŸ¢ ä»…å¯åŠ¨å‰ç«¯ (5173) |
| `Build: Core` | æ‰‹åŠ¨é€‰æ‹© | ç¼–è¯‘æ ¸å¿ƒå±‚ |
| `Build: Server` | æ‰‹åŠ¨é€‰æ‹© | ç¼–è¯‘åç«¯ |

### ä½¿ç”¨æµç¨‹

```
1. æŒ‰ Cmd + Shift + B
2. è‡ªåŠ¨æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼š
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ”µ Server   â”‚    â”‚ ğŸŸ¢ Web      â”‚
   â”‚ :3000       â”‚    â”‚ :5173       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
3. è®¿é—® http://localhost:5173
```

---

## ğŸ“¦ å¸¸ç”¨å‘½ä»¤

### Makefile

```bash
make help       # æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
make dev        # å¯åŠ¨å…¨éƒ¨æœåŠ¡
make server     # ä»…å¯åŠ¨åç«¯
make web        # ä»…å¯åŠ¨å‰ç«¯
make build      # ç¼–è¯‘æ‰€æœ‰åŒ…
make reinstall  # é‡è£…ä¾èµ–
```

### pnpm

```bash
# å¼€å‘
pnpm dev:web         # å¯åŠ¨å‰ç«¯
pnpm start:server    # å¯åŠ¨åç«¯

# ç¼–è¯‘
pnpm build           # ç¼–è¯‘æ‰€æœ‰åŒ…
pnpm build:core      # ç¼–è¯‘æ ¸å¿ƒå±‚
pnpm build:server    # ç¼–è¯‘åç«¯
pnpm build:web       # ç¼–è¯‘å‰ç«¯

# ä»£ç è´¨é‡
pnpm lint            # ESLint æ£€æŸ¥
pnpm lint:fix        # è‡ªåŠ¨ä¿®å¤
pnpm format          # Prettier æ ¼å¼åŒ–
```

---

## ğŸ› å¸¸è§é—®é¢˜

### å¯åŠ¨æ—¶æŠ¥é”™ "Unsupported Node version"

**åŸå› **ï¼šNode ç‰ˆæœ¬ä¸å¯¹

**è§£å†³**ï¼š
1. ä½¿ç”¨ VS Code Tasks æˆ– `make dev` å¯åŠ¨ï¼ˆè‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬ï¼‰
2. æˆ–æ‰‹åŠ¨åˆ‡æ¢ï¼š`nvm use 18`

### ç«¯å£è¢«å ç”¨ (EADDRINUSE)

```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -i :3000

# æ€æ‰è¿›ç¨‹
kill -9 <PID>
```

### MongoDB è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥çŠ¶æ€
brew services list | grep mongodb

# é‡å¯
brew services restart mongodb-community
```

### VS Code Tasks ä¸ç”Ÿæ•ˆ

1. é‡æ–°åŠ è½½çª—å£ï¼š`Cmd + Shift + P` â†’ "Reload Window"
2. æ£€æŸ¥ `.vscode/tasks.json` æ˜¯å¦å­˜åœ¨

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æµ‹è¯•æŒ‡å—](./æµ‹è¯•æŒ‡å—.md) - åŠŸèƒ½æµ‹è¯•æ¸…å•
- [æŠ€æœ¯æ–¹æ¡ˆ](./æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ï¼ˆV1ï¼‰.md) - ç³»ç»Ÿæ¶æ„è®¾è®¡
- [PRD](./PRDï¼ˆæœ€ç»ˆ%20V1ï¼‰.md) - äº§å“éœ€æ±‚æ–‡æ¡£
