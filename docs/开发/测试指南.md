# WeekNote 测试指南

本文档提供功能测试清单，帮助验证系统各模块是否正常工作。

> 📖 环境配置和启动方式请参考 [开发指南](./开发指南.md)

---

## ✅ 功能测试清单

### 1. 用户认证

| 测试项 | 操作 | 预期结果 |
|--------|------|---------|
| 注册 | 填写邮箱、用户名、密码 → 点击注册 | ✅ 注册成功，跳转首页 |
| 登录 | 填写邮箱、密码 → 点击登录 | ✅ 登录成功，跳转首页 |
| 退出 | 点击右上角用户菜单 → 退出 | ✅ 跳转到登录页 |
| Token 刷新 | 长时间使用后操作 | ✅ 自动刷新，无需重新登录 |

### 2. API Key 配置

| 测试项 | 操作 | 预期结果 |
|--------|------|---------|
| 添加 Key | 设置 → 模型与 API Key → 填写保存 | ✅ 显示「已配置」 |
| 切换默认模型 | 点击模型卡片 | ✅ 显示「当前默认」 |
| 删除 Key | 点击删除按钮 | ✅ 恢复「未配置」 |

### 3. 每日记录

| 测试项 | 操作 | 预期结果 |
|--------|------|---------|
| 创建记录 | 每日记录 → 选择日期 → 编辑 | ✅ 自动保存 |
| 切换日期 | 点击日历其他日期 | ✅ 显示对应内容 |
| 自动保存 | 编辑后等待 1 秒 | ✅ 显示「已保存」 |

### 4. 周报生成

| 测试项 | 操作 | 预期结果 |
|--------|------|---------|
| 手动输入 | 首页粘贴 Daily Log → 生成 | ✅ 流式输出周报 |
| 导入本周 | 首页点击「导入本周」 | ✅ 自动填充内容 |
| 复制周报 | 点击复制按钮 | ✅ 复制到剪贴板 |

### 5. Prompt 模板

| 测试项 | 操作 | 预期结果 |
|--------|------|---------|
| 创建模板 | 设置 → Prompt → 新建 | ✅ 创建成功 |
| 激活模板 | 点击「使用此模板」 | ✅ 显示激活状态 |
| 模板广场 | 切换到「广场」Tab | ✅ 显示公开模板 |

### 6. 提醒功能

| 测试项 | 操作 | 预期结果 |
|--------|------|---------|
| 钉钉推送 | 填写 Webhook → 测试 | ✅ 收到消息 |
| Server酱 | 填写 SendKey → 测试 | ✅ 微信收到消息 |
| 添加时间点 | 点击「添加提醒时间」 | ✅ 新增时间点 |

---

## 🗄️ 数据库验证

```bash
mongosh
use weeknote
```

```javascript
// 查看用户
db.users.find().pretty()

// 查看每日记录
db.dailylogs.find().pretty()

// 查看 Prompt 模板
db.prompttemplates.find().pretty()

// 查看生成历史
db.generationhistories.find().pretty()
```

---

## 🐛 常见问题

### 401 Unauthorized

清除浏览器 LocalStorage 中的 `accessToken` 和 `refreshToken`，刷新页面重新登录。

### API 调用失败

1. 检查后端是否运行（查看终端日志）
2. 打开 Network 标签页查看错误响应
3. 确认 API Key 已正确配置

---

## 📊 测试记录模板

| 项目 | 结果 |
|------|------|
| 测试日期 | ______ |
| 测试人 | ______ |
| 用户认证 | □ 通过 |
| API Key | □ 通过 |
| 每日记录 | □ 通过 |
| 周报生成 | □ 通过 |
| Prompt 模板 | □ 通过 |
| 提醒功能 | □ 通过 |
