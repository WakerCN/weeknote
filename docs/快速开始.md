# WeekNote 云端版本 - 快速开始

## 🎯 5 分钟快速启动

按照以下步骤，5 分钟内启动并测试云端版本：

---

### 1️⃣ 启动 MongoDB

```bash
# macOS (Homebrew)
brew services start mongodb-community

# 或使用 Docker
docker run -d --name weeknote-mongo -p 27017:27017 mongo:latest
```

---

### 2️⃣ 配置环境变量

在项目根目录创建 `.env` 文件：

```bash
cd /Users/starone/Desktop/StarOne-PC/self/weeknote
cat > .env << 'EOF'
MONGODB_URI=mongodb://localhost:27017/weeknote
JWT_SECRET=$(openssl rand -base64 32)
PORT=3000
EOF
```

**或手动创建 `.env` 文件**，内容如下：

```env
MONGODB_URI=mongodb://localhost:27017/weeknote
JWT_SECRET=your-random-secret-key-at-least-32-characters
PORT=3000
```

---

### 3️⃣ 安装依赖并启动服务

#### 方案 A: 使用快速启动脚本（推荐）

```bash
# 项目根目录执行
./scripts/start-cloud.sh
```

#### 方案 B: 手动启动

```bash
# 1. 安装依赖
pnpm install

# 2. 编译后端
pnpm --filter @weeknote/server build

# 3. 启动服务
pnpm --filter @weeknote/server start
```

---

### 4️⃣ 访问应用

打开浏览器访问：**http://localhost:3000**

你会看到登录/注册页面！

---

## ✅ 快速测试

### 注册新用户
1. 点击"注册" Tab
2. 填写邮箱、用户名、密码
3. 点击"注册"按钮

### 配置 API Key
1. 进入"设置" → "模型与 API Key"
2. 选择平台（如 SiliconFlow）
3. 填写 API Key
4. 保存

### 生成周报
1. 返回首页
2. 在 Daily Log 输入框输入日志
3. 选择模型
4. 点击"🚀 生成周报"

---

## 📚 详细文档

完整的测试步骤和故障排查，请查看：[测试指南.md](./测试指南.md)

---

## 🐛 常见问题

### MongoDB 连接失败

**错误**: `connect ECONNREFUSED 127.0.0.1:27017`

**解决**:
```bash
# 检查 MongoDB 状态
brew services list | grep mongodb

# 重启 MongoDB
brew services restart mongodb-community
```

### 端口被占用

**错误**: `Error: listen EADDRINUSE: address already in use :::3000`

**解决**:
```bash
# 查找占用 3000 端口的进程
lsof -i :3000

# 杀死进程
kill -9 <PID>

# 或使用其他端口
PORT=3001 pnpm --filter @weeknote/server start
```

### JWT_SECRET 警告

**警告**: `使用默认 JWT_SECRET，请在生产环境中配置环境变量`

**解决**: 在 `.env` 文件中设置 `JWT_SECRET`

---

## 🎉 测试成功？

如果一切正常，恭喜你！WeekNote 云端版本已经运行起来了。

下一步可以：
- 📝 记录每日工作日志
- 🤖 使用 AI 生成周报
- 👥 创建多个用户测试隔离性
- 🚀 准备部署到云端

有问题？查看 [测试指南.md](./测试指南.md) 获取详细帮助。
