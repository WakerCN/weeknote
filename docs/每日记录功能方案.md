# æ¯æ—¥è®°å½•åŠŸèƒ½æ–¹æ¡ˆ

> ç‰ˆæœ¬ï¼šV1.0  
> æ—¥æœŸï¼š2024-12-24  
> çŠ¶æ€ï¼šå¾…å®¡æ ¸

---

## 1. èƒŒæ™¯ä¸åŠ¨æœº

### 1.1 å½“å‰ç—›ç‚¹

ç”¨æˆ·ç›®å‰çš„å·¥ä½œæµç¨‹æ˜¯ï¼š
1. åœ¨å…¶ä»–å¹³å°ï¼ˆå¦‚è¯­é›€ï¼‰è®°å½•æ¯æ—¥å·¥ä½œå†…å®¹
2. å‘¨äº”æ—¶å¤åˆ¶æ•´å‘¨å†…å®¹ç²˜è´´åˆ° WeekNote ç”Ÿæˆå‘¨æŠ¥

å­˜åœ¨çš„é—®é¢˜ï¼š
- éœ€è¦åœ¨å¤šä¸ªå¹³å°ä¹‹é—´åˆ‡æ¢
- è®°å½•æ ¼å¼å¯èƒ½ä¸ç¬¦åˆç³»ç»ŸæœŸæœ›ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´
- å®¹æ˜“é—å¿˜è®°å½•ï¼Œå‘¨äº”æ—¶éœ€è¦å›å¿†æ•´å‘¨å·¥ä½œ

### 1.2 ç›®æ ‡

åœ¨ WeekNote ç³»ç»Ÿä¸­ç›´æ¥æ”¯æŒæ¯æ—¥å·¥ä½œè®°å½•ï¼Œå®ç°ï¼š
- **ä¸€ç«™å¼ä½“éªŒ**ï¼šè®°å½•å’Œç”Ÿæˆå‘¨æŠ¥åœ¨åŒä¸€ç³»ç»Ÿå®Œæˆ
- **æ ¼å¼ä¸€è‡´**ï¼šè®°å½•æ—¶å³æŒ‰ç³»ç»ŸæœŸæœ›æ ¼å¼è¾“å…¥
- **å†å²å¯æŸ¥**ï¼šå¯æµè§ˆå’Œç¼–è¾‘å†å²è®°å½•
- **ä¾¿æ·å¯¼å…¥**ï¼šä¸€é”®å°†æœ¬å‘¨è®°å½•å¯¼å…¥é¦–é¡µç”Ÿæˆå‘¨æŠ¥

---

## 2. åŠŸèƒ½æ¦‚è¿°

### 2.1 æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| æ¯æ—¥è®°å½• | æŒ‰ Plan/Result/Issues/Notes åˆ†åŒºè¾“å…¥å½“å¤©å·¥ä½œå†…å®¹ |
| å†å²æµè§ˆ | æŒ‰å‘¨åˆ†ç»„æŸ¥çœ‹å†å²è®°å½• |
| è¡¥å½•æ”¯æŒ | å¯é€‰æ‹©ä»»æ„å†å²æ—¥æœŸè¡¥å½•å†…å®¹ |
| å¯¼å‡ºå¯¼å…¥ | ä¸€é”®å°†æœ¬å‘¨è®°å½•å¯¼å…¥é¦–é¡µç”¨äºç”Ÿæˆå‘¨æŠ¥ |
| è‡ªåŠ¨ä¿å­˜ | å®æ—¶ä¿å­˜ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤± |

### 2.2 éåŠŸèƒ½éœ€æ±‚

- æ•°æ®æœ¬åœ°å­˜å‚¨ï¼Œæ— éœ€è”ç½‘
- æŒ‰å‘¨åˆ†æ–‡ä»¶ï¼Œä¾¿äºç®¡ç†å’Œå¤‡ä»½
- æ”¯æŒé•¿æœŸå­˜å‚¨ï¼Œå¯è¿½æº¯å†å²

---

## 3. å­˜å‚¨è®¾è®¡

### 3.1 ç›®å½•ç»“æ„

```
~/.weeknote/
â”œâ”€â”€ config.json           # ç°æœ‰ï¼šAPI Key ç­‰é…ç½®
â”œâ”€â”€ prompts.json          # ç°æœ‰ï¼šPrompt æ¨¡æ¿
â””â”€â”€ dailyLog/             # æ–°å¢ï¼šæ¯æ—¥æ—¥å¿—å­˜å‚¨ç›®å½•
    â”œâ”€â”€ 2024-W51_12-16~12-22.json
    â”œâ”€â”€ 2024-W52_12-23~12-29.json
    â””â”€â”€ 2025-W01_12-30~01-05.json
```

### 3.2 æ–‡ä»¶å‘½åè§„èŒƒ

```
{å¹´ä»½}-W{å‘¨æ•°}_{èµ·å§‹æœˆ-æ—¥}~{ç»“æŸæœˆ-æ—¥}.json

ç¤ºä¾‹ï¼š
2024-W52_12-23~12-29.json
2025-W01_12-30~01-05.json
```

è¯´æ˜ï¼š
- ä½¿ç”¨ ISO å‘¨æ•°ï¼ˆW01-W53ï¼‰
- é¿å…ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ `|`ï¼‰ï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹
- å‘¨èŒƒå›´ä¸ºå‘¨ä¸€åˆ°å‘¨æ—¥ï¼ˆ7 å¤©ï¼‰

### 3.3 JSON æ•°æ®ç»“æ„

```typescript
/**
 * å•æ¡æ¯æ—¥è®°å½•
 */
interface DailyRecord {
  /** æ—¥æœŸ ISO æ ¼å¼ "2024-12-23" */
  date: string;
  /** æ˜ŸæœŸå‡  "å‘¨ä¸€" */
  dayOfWeek: string;
  /** è®¡åˆ’å†…å®¹ */
  plan: string[];
  /** å®Œæˆç»“æœ */
  result: string[];
  /** é‡åˆ°çš„é—®é¢˜ */
  issues: string[];
  /** å¤‡æ³¨ */
  notes: string[];
  /** åˆ›å»ºæ—¶é—´ ISO æ ¼å¼ */
  createdAt: string;
  /** æ›´æ–°æ—¶é—´ ISO æ ¼å¼ */
  updatedAt: string;
}

/**
 * å‘¨æ—¥å¿—æ–‡ä»¶ç»“æ„
 */
interface WeeklyLogFile {
  /** æ–‡ä»¶ç‰ˆæœ¬ï¼Œä¾¿äºåç»­æ•°æ®è¿ç§» */
  version: 1;
  /** å¹´ä»½ */
  year: number;
  /** ISO å‘¨æ•° */
  week: number;
  /** å‘¨èµ·å§‹æ—¥æœŸï¼ˆå‘¨ä¸€ï¼‰"2024-12-23" */
  weekStart: string;
  /** å‘¨ç»“æŸæ—¥æœŸï¼ˆå‘¨æ—¥ï¼‰"2024-12-29" */
  weekEnd: string;
  /** æŒ‰æ—¥æœŸç´¢å¼•çš„è®°å½• */
  days: Record<string, DailyRecord>;
  /** æ–‡ä»¶åˆ›å»ºæ—¶é—´ */
  createdAt: string;
  /** æ–‡ä»¶æ›´æ–°æ—¶é—´ */
  updatedAt: string;
}
```

### 3.4 ç¤ºä¾‹ JSON æ–‡ä»¶

```json
{
  "version": 1,
  "year": 2024,
  "week": 52,
  "weekStart": "2024-12-23",
  "weekEnd": "2024-12-29",
  "days": {
    "2024-12-23": {
      "date": "2024-12-23",
      "dayOfWeek": "å‘¨ä¸€",
      "plan": [
        "å®Œæˆå³°è°·ç”µä»·å›¾å¼€å‘",
        "hb-yuque-desensiter é¡¹ç›®æ¨è¿›"
      ],
      "result": [
        "å®Œæˆå³°è°·ç”µä»·ç»„ä»¶å°è£…",
        "åˆæ­¥å®Œæˆ hb-yuque-desensiter é¡¹ç›®"
      ],
      "issues": [
        "md æ ¼å¼å¯¼å‡ºè¯­é›€æ— æ³•è‡ªåŠ¨åŒæ­¥åˆ†æ ç»„ä»¶æ ·å¼"
      ],
      "notes": [],
      "createdAt": "2024-12-23T09:00:00.000Z",
      "updatedAt": "2024-12-23T18:30:00.000Z"
    },
    "2024-12-24": {
      "date": "2024-12-24",
      "dayOfWeek": "å‘¨äºŒ",
      "plan": [
        "å›½é™…åŒ–ç»„ä»¶æ¥å…¥è§„åˆ’"
      ],
      "result": [
        "æ•´ç†æ–‡æ¡£",
        "å®Œæˆå‘¨æŠ¥å·¥å…·åˆç‰ˆ"
      ],
      "issues": [],
      "notes": [],
      "createdAt": "2024-12-24T09:00:00.000Z",
      "updatedAt": "2024-12-24T17:00:00.000Z"
    }
  },
  "createdAt": "2024-12-23T09:00:00.000Z",
  "updatedAt": "2024-12-24T17:00:00.000Z"
}
```

---

## 4. æ—¥æœŸç³»ç»Ÿè®¾è®¡

### 4.1 è®¾è®¡åŸåˆ™

> **ç®€å•ä¼˜å…ˆï¼Œæ§åˆ¶æƒäº¤ç»™ç”¨æˆ·**

- é»˜è®¤å±•ç¤ºå‘¨ä¸€åˆ°å‘¨æ—¥å…¨éƒ¨ 7 å¤©
- ç”¨æˆ·è‡ªä¸»å†³å®šå“ªå¤©è®°å½•ã€å“ªå¤©è·³è¿‡
- ç³»ç»Ÿåªå…³æ³¨ã€Œæœ‰æ²¡æœ‰å†…å®¹ã€ï¼Œä¸åˆ¤æ–­ã€Œåº”ä¸åº”è¯¥æœ‰ã€
- ä¸å¼•å…¥å¤æ‚çš„èŠ‚å‡æ—¥ç³»ç»Ÿ

### 4.2 æ—¥æœŸå±•ç¤ºè§„åˆ™

| ç±»å‹ | å±•ç¤ºè§„åˆ™ |
|------|---------|
| å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€~å‘¨äº”ï¼‰ | é»˜è®¤å±•å¼€æ˜¾ç¤º |
| å‘¨æœ«ï¼ˆå‘¨å…­~å‘¨æ—¥ï¼‰ | é»˜è®¤æŠ˜å ï¼Œæœ‰è®°å½•æ—¶è‡ªåŠ¨å±•å¼€ |

### 4.3 è®°å½•çŠ¶æ€æ ‡è¯†

| çŠ¶æ€ | å›¾æ ‡ | åˆ¤æ–­æ¡ä»¶ |
|------|------|---------|
| å·²è®°å½• | â— ç»¿è‰² | æœ‰ä»»æ„å†…å®¹ï¼ˆplan/result/issues/notesï¼‰ |
| æœªè®°å½• | â—‹ ç°è‰² | æ— ä»»ä½•å†…å®¹ |

### 4.4 æ—¥æœŸå·¥å…·å‡½æ•°

```typescript
// packages/core/src/daily-log/date-utils.ts

const WEEKDAY_NAMES = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];

/**
 * è·å–æ—¥æœŸçš„æ˜ŸæœŸå‡ 
 */
function getDayOfWeek(date: Date | string): string {
  const d = typeof date === 'string' ? new Date(date) : date;
  return WEEKDAY_NAMES[d.getDay()];
}

/**
 * åˆ¤æ–­æ˜¯å¦ä¸ºå‘¨æœ«
 */
function isWeekend(date: Date | string): boolean {
  const d = typeof date === 'string' ? new Date(date) : date;
  const day = d.getDay();
  return day === 0 || day === 6;
}

/**
 * è·å–æŸå‘¨çš„æ‰€æœ‰æ—¥æœŸï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰
 */
function getWeekDates(weekStart: string): Array<{
  date: string;
  dayOfWeek: string;
  isWeekend: boolean;
}>;

/**
 * è·å–æœ¬å‘¨çš„å‘¨ä¸€æ—¥æœŸ
 */
function getWeekStart(date?: Date): string;

/**
 * è·å–å‘¨æ–‡ä»¶å
 */
function getWeekFileName(date: Date | string): string;

/**
 * æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º "12-23"
 */
function formatShortDate(date: string): string;
```

---

## 5. API è®¾è®¡

### 5.1 æ¥å£åˆ—è¡¨

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/daily-logs/weeks` | è·å–æ‰€æœ‰å‘¨æ–‡ä»¶åˆ—è¡¨ |
| GET | `/api/daily-logs/week` | è·å–æŸå‘¨çš„æ‰€æœ‰è®°å½• |
| GET | `/api/daily-logs/day/:date` | è·å–æŸå¤©çš„è®°å½• |
| POST | `/api/daily-logs/day/:date` | ä¿å­˜æŸå¤©çš„è®°å½• |
| GET | `/api/daily-logs/export` | å¯¼å‡ºæŸå‘¨ä¸ºæ–‡æœ¬æ ¼å¼ |
| GET | `/api/daily-logs/stats` | è·å–æœ¬å‘¨è®°å½•ç»Ÿè®¡ |

### 5.2 æ¥å£è¯¦æƒ…

#### 5.2.1 è·å–å‘¨æ–‡ä»¶åˆ—è¡¨

```
GET /api/daily-logs/weeks
```

å“åº”ï¼š
```json
{
  "weeks": [
    {
      "fileName": "2024-W52_12-23~12-29.json",
      "year": 2024,
      "week": 52,
      "weekStart": "2024-12-23",
      "weekEnd": "2024-12-29",
      "filledDays": 3,
      "lastUpdated": "2024-12-24T17:00:00.000Z"
    }
  ]
}
```

#### 5.2.2 è·å–æŸå‘¨è®°å½•

```
GET /api/daily-logs/week?date=2024-12-23
```

å‚æ•°ï¼š
- `date`ï¼šè¯¥å‘¨å†…ä»»æ„ä¸€å¤©çš„æ—¥æœŸï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸ºå½“å‰å‘¨

å“åº”ï¼š
```json
{
  "version": 1,
  "year": 2024,
  "week": 52,
  "weekStart": "2024-12-23",
  "weekEnd": "2024-12-29",
  "days": { ... },
  "createdAt": "...",
  "updatedAt": "..."
}
```

#### 5.2.3 è·å–æŸå¤©è®°å½•

```
GET /api/daily-logs/day/2024-12-23
```

å“åº”ï¼š
```json
{
  "date": "2024-12-23",
  "dayOfWeek": "å‘¨ä¸€",
  "plan": ["..."],
  "result": ["..."],
  "issues": ["..."],
  "notes": ["..."],
  "createdAt": "...",
  "updatedAt": "..."
}
```

#### 5.2.4 ä¿å­˜æŸå¤©è®°å½•

```
POST /api/daily-logs/day/2024-12-23
Content-Type: application/json

{
  "plan": ["ä»»åŠ¡1", "ä»»åŠ¡2"],
  "result": ["å®Œæˆ1", "å®Œæˆ2"],
  "issues": ["é—®é¢˜1"],
  "notes": []
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "updatedAt": "2024-12-23T18:30:00.000Z"
}
```

#### 5.2.5 å¯¼å‡ºä¸ºæ–‡æœ¬æ ¼å¼

```
GET /api/daily-logs/export?date=2024-12-23
```

å“åº”ï¼š
```json
{
  "text": "2024-12-23 | å‘¨ä¸€\nPlan\n- ä»»åŠ¡1\n- ä»»åŠ¡2\n\nResult\n- å®Œæˆ1\n..."
}
```

#### 5.2.6 è·å–è®°å½•ç»Ÿè®¡

```
GET /api/daily-logs/stats?date=2024-12-23
```

å“åº”ï¼š
```json
{
  "weekStart": "2024-12-23",
  "weekEnd": "2024-12-29",
  "filledDays": 3,
  "weekdaysFilled": 3,
  "totalDays": 7
}
```

---

## 6. é¡µé¢è®¾è®¡

### 6.1 å…¥å£è®¾è®¡

åœ¨é¦–é¡µ Header å¢åŠ ã€Œæ¯æ—¥è®°å½•ã€å…¥å£ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [W] WeekNote              AI å‘¨æŠ¥ç”Ÿæˆå™¨    [ğŸ“… æ¯æ—¥è®°å½•] [âš™ï¸ è®¾ç½®]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 è·¯ç”±è®¾è®¡

```typescript
const routes = [
  { path: '/', element: <Home /> },
  { path: '/daily', element: <DailyLog /> },
  { path: '/daily/:date', element: <DailyLog /> },  // æ”¯æŒç›´æ¥è·³è½¬åˆ°æŸå¤©
  { path: '/settings/*', element: <SettingsLayout /> },
];
```

### 6.3 æ¯æ—¥è®°å½•é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [W] WeekNote              æ¯æ—¥è®°å½•                        [ğŸ ] [âš™ï¸]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“… å†å²è®°å½•          â”‚  â”‚  12æœˆ23æ—¥ å‘¨ä¸€                    âœ“ å·²ä¿å­˜ â”‚â”‚
â”‚  â”‚                     â”‚  â”‚                                            â”‚â”‚
â”‚  â”‚ â–¼ æœ¬å‘¨             â”‚  â”‚  Plan ä»Šæ—¥è®¡åˆ’                             â”‚â”‚
â”‚  â”‚   12-23~12-29      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚   â”œ 12-23 å‘¨ä¸€ â—    â”‚  â”‚  â”‚ - å®Œæˆå³°è°·ç”µä»·å›¾å¼€å‘                   â”‚ â”‚â”‚
â”‚  â”‚   â”œ 12-24 å‘¨äºŒ â—    â”‚  â”‚  â”‚ - hb-yuque é¡¹ç›®æ¨è¿›                   â”‚ â”‚â”‚
â”‚  â”‚   â”œ 12-25 å‘¨ä¸‰ â—‹    â”‚  â”‚  â”‚                                       â”‚ â”‚â”‚
â”‚  â”‚   â”œ 12-26 å‘¨å›› â—‹    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚   â”” 12-27 å‘¨äº” â—‹    â”‚  â”‚                                            â”‚â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  Result å®Œæˆç»“æœ                           â”‚â”‚
â”‚  â”‚   â–¶ å‘¨æœ« (0)       â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚                     â”‚  â”‚  â”‚ - å®Œæˆå³°è°·ç”µä»·ç»„ä»¶å°è£…                  â”‚ â”‚â”‚
â”‚  â”‚ â–¶ ä¸Šå‘¨             â”‚  â”‚  â”‚ - åˆæ­¥å®Œæˆ desensiter é¡¹ç›®             â”‚ â”‚â”‚
â”‚  â”‚   12-16~12-22      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                     â”‚  â”‚                                            â”‚â”‚
â”‚  â”‚ â–¶ 2å‘¨å‰            â”‚  â”‚  Issues é‡åˆ°é—®é¢˜                           â”‚â”‚
â”‚  â”‚   12-09~12-15      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚                     â”‚  â”‚  â”‚ - md æ ¼å¼å¯¼å‡ºé—®é¢˜                       â”‚ â”‚â”‚
â”‚  â”‚                     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                     â”‚  â”‚                                            â”‚â”‚
â”‚  â”‚                     â”‚  â”‚  Notes å¤‡æ³¨                                â”‚â”‚
â”‚  â”‚                     â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚                                        â”‚ â”‚â”‚
â”‚  â”‚ â”‚ + è¡¥å½•å…¶ä»–æ—¥æœŸ   â”‚ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚                           â”‚  â”‚ â—€ 12-22 å‘¨æ—¥ â”‚  â”‚  12-24 å‘¨äºŒ â–¶     â”‚  â”‚â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                          â”‚
â”‚           æœ¬å‘¨å·²è®°å½• 2/5 ä¸ªå·¥ä½œæ—¥    [ ğŸš€ å¯¼å…¥æœ¬å‘¨åˆ°é¦–é¡µç”Ÿæˆå‘¨æŠ¥ ]        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 å·¦ä¾§å†å²åˆ—è¡¨ç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… å†å²è®°å½•          â”‚
â”‚                     â”‚
â”‚ â–¼ æœ¬å‘¨              â”‚  â† å½“å‰å‘¨é»˜è®¤å±•å¼€
â”‚   12-23~12-29       â”‚
â”‚   â”œ 12-23 å‘¨ä¸€ â—    â”‚  â† â— ç»¿è‰²è¡¨ç¤ºæœ‰è®°å½•
â”‚   â”œ 12-24 å‘¨äºŒ â—    â”‚
â”‚   â”œ 12-25 å‘¨ä¸‰ â—‹    â”‚  â† â—‹ ç°è‰²è¡¨ç¤ºæœªè®°å½•
â”‚   â”œ 12-26 å‘¨å›› â—‹    â”‚
â”‚   â”” 12-27 å‘¨äº” â—‹    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚   â–¶ å‘¨æœ« (0)       â”‚  â† å‘¨æœ«é»˜è®¤æŠ˜å ï¼Œæ‹¬å·å†…ä¸ºå·²è®°å½•å¤©æ•°
â”‚                     â”‚
â”‚ â–¶ ä¸Šå‘¨              â”‚  â† å†å²å‘¨é»˜è®¤æŠ˜å 
â”‚   12-16~12-22 (4)  â”‚  â† æ‹¬å·å†…ä¸ºè¯¥å‘¨å·²è®°å½•å¤©æ•°
â”‚                     â”‚
â”‚ â–¶ 2å‘¨å‰            â”‚
â”‚   12-09~12-15 (5)  â”‚
â”‚                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ + è¡¥å½•å…¶ä»–æ—¥æœŸ   â”‚ â”‚  â† ç‚¹å‡»å¼¹å‡ºæ—¥æœŸé€‰æ‹©å™¨
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5 å³ä¾§ç¼–è¾‘åŒºç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  12æœˆ23æ—¥ å‘¨ä¸€                                    âœ“ å·²ä¿å­˜ â”‚
â”‚                                                            â”‚
â”‚  Plan ä»Šæ—¥è®¡åˆ’                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ - å®Œæˆå³°è°·ç”µä»·å›¾å¼€å‘                                    â”‚â”‚
â”‚  â”‚ - hb-yuque é¡¹ç›®æ¨è¿›                                    â”‚â”‚
â”‚  â”‚ |                                        ï¼ˆå…‰æ ‡é—ªçƒï¼‰ â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  ğŸ’¡ æ¯è¡Œä¸€æ¡ï¼Œä»¥ - å¼€å¤´                                    â”‚
â”‚                                                            â”‚
â”‚  Result å®Œæˆç»“æœ                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ - å®Œæˆå³°è°·ç”µä»·ç»„ä»¶å°è£…                                  â”‚â”‚
â”‚  â”‚ - åˆæ­¥å®Œæˆ desensiter é¡¹ç›®                             â”‚â”‚
â”‚  â”‚                                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                            â”‚
â”‚  Issues é‡åˆ°é—®é¢˜                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ - md æ ¼å¼å¯¼å‡ºé—®é¢˜                                       â”‚â”‚
â”‚  â”‚                                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                            â”‚
â”‚  Notes å¤‡æ³¨                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                        â”‚â”‚
â”‚  â”‚                                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â—€ 12-22 å‘¨æ—¥   â”‚                  â”‚  12-24 å‘¨äºŒ â–¶   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.6 è¡¥å½•æ—¥æœŸé€‰æ‹©å™¨

ç‚¹å‡»ã€Œ+ è¡¥å½•å…¶ä»–æ—¥æœŸã€åå¼¹å‡ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é€‰æ‹©è¦è¡¥å½•çš„æ—¥æœŸ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â—€  2024å¹´12æœˆ  â–¶       â”‚
â”‚  æ—¥  ä¸€  äºŒ  ä¸‰  å››  äº”  å…­  â”‚
â”‚                             â”‚
â”‚  1   2   3   4   5   6   7  â”‚
â”‚  8   9  10  11  12  13  14  â”‚
â”‚ 15  16  17  18  19  20  21  â”‚
â”‚ 22 [23] 24  25  26  27  28  â”‚
â”‚ 29  30  31                  â”‚
â”‚                             â”‚
â”‚  ğŸ’¡ åªèƒ½é€‰æ‹©ä»Šå¤©åŠä¹‹å‰çš„æ—¥æœŸ  â”‚
â”‚                             â”‚
â”‚        [ å–æ¶ˆ ]  [ ç¡®å®š ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.7 é¦–é¡µé›†æˆ

#### 6.7.1 Header å…¥å£

```tsx
<button onClick={() => navigate('/daily')}>
  <Calendar className="w-4 h-4" />
  æ¯æ—¥è®°å½•
</button>
```

#### 6.7.2 å¿«æ·å¯¼å…¥æŒ‰é’®

åœ¨ Daily Log è¾“å…¥åŒºåŸŸ Header å¢åŠ å¯¼å…¥æŒ‰é’®ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ Daily Log                          [ğŸ“¥ å¯¼å…¥æœ¬å‘¨] [ğŸ‘ï¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ï¼ˆè¾“å…¥åŒºåŸŸï¼‰                                             â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ç‚¹å‡»ã€Œå¯¼å…¥æœ¬å‘¨ã€åï¼Œè‡ªåŠ¨æ‹‰å–æœ¬å‘¨å·²è®°å½•çš„å†…å®¹ï¼Œæ ¼å¼åŒ–åå¡«å……åˆ°è¾“å…¥æ¡†ã€‚

#### 6.7.3 åº•éƒ¨ç»Ÿè®¡æç¤ºï¼ˆå¯é€‰ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœ¬å‘¨å·²è®°å½• 3/5 ä¸ªå·¥ä½œæ—¥          [ å»æ¯æ—¥è®°å½•é¡µè¡¥å…… â†’ ] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. äº¤äº’æµç¨‹

### 7.1 è®°å½•å·¥ä½œæµ

```mermaid
flowchart TD
    A[ç”¨æˆ·æ‰“å¼€æ¯æ—¥è®°å½•é¡µ] --> B[æ˜¾ç¤ºæœ¬å‘¨æ—¥æœŸåˆ—è¡¨]
    B --> C[é»˜è®¤é€‰ä¸­ä»Šå¤©]
    C --> D[ç”¨æˆ·ç¼–è¾‘ Plan/Result/Issues/Notes]
    D --> E{å†…å®¹å˜åŒ–}
    E -->|æ˜¯| F[è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶]
    F --> G[æ›´æ–°å·¦ä¾§çŠ¶æ€æ ‡è¯†]
    E -->|å¦| H[ç­‰å¾…ç¼–è¾‘]
```

### 7.2 å¯¼å…¥åˆ°é¦–é¡µæµç¨‹

```mermaid
flowchart TD
    A[ç”¨æˆ·åœ¨é¦–é¡µç‚¹å‡»å¯¼å…¥æœ¬å‘¨] --> B[è°ƒç”¨ /api/daily-logs/export]
    B --> C[è·å–æ ¼å¼åŒ–æ–‡æœ¬]
    C --> D{å½“å‰è¾“å…¥æ¡†æœ‰å†…å®¹?}
    D -->|æ˜¯| E[å¼¹çª—ç¡®è®¤æ˜¯å¦è¦†ç›–]
    D -->|å¦| F[ç›´æ¥å¡«å……]
    E -->|ç¡®è®¤| F
    E -->|å–æ¶ˆ| G[ä¿æŒåŸçŠ¶]
    F --> H[å¯ç»§ç»­ç¼–è¾‘æˆ–ç”Ÿæˆå‘¨æŠ¥]
```

### 7.3 è¡¥å½•å†å²æµç¨‹

```mermaid
flowchart TD
    A[ç‚¹å‡»è¡¥å½•å…¶ä»–æ—¥æœŸ] --> B[å¼¹å‡ºæ—¥æœŸé€‰æ‹©å™¨]
    B --> C[é€‰æ‹©å†å²æ—¥æœŸ]
    C --> D[è·³è½¬åˆ°è¯¥æ—¥æœŸç¼–è¾‘é¡µ]
    D --> E[ç¼–è¾‘å†…å®¹]
    E --> F[è‡ªåŠ¨ä¿å­˜]
```

---

## 8. æ–‡ä»¶ç»“æ„

### 8.1 Core åŒ…æ–°å¢

```
packages/core/src/daily-log/
â”œâ”€â”€ index.ts              # æ¨¡å—å…¥å£ï¼Œå¯¼å‡ºæ‰€æœ‰åŠŸèƒ½
â”œâ”€â”€ types.ts              # ç±»å‹å®šä¹‰
â”œâ”€â”€ date-utils.ts         # æ—¥æœŸå·¥å…·å‡½æ•°
â”œâ”€â”€ manager.ts            # å­˜å‚¨ç®¡ç†å™¨
â””â”€â”€ __tests__/
    â”œâ”€â”€ date-utils.test.ts
    â””â”€â”€ manager.test.ts
```

### 8.2 CLI åŒ…æ–°å¢

```
packages/cli/src/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ index.ts          # ç°æœ‰ï¼Œéœ€ä¿®æ”¹ï¼šæ³¨å†Œæ–°è·¯ç”±
â”‚   â””â”€â”€ daily-logs.ts     # æ–°å¢ï¼šæ¯æ—¥è®°å½• API è·¯ç”±
â””â”€â”€ commands/
    â””â”€â”€ log.ts            # æ–°å¢ï¼ˆP2ï¼‰ï¼šCLI å¿«æ·è®°å½•å‘½ä»¤
```

### 8.3 Web åŒ…æ–°å¢

```
packages/web/src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home.tsx          # ä¿®æ”¹ï¼šå¢åŠ å…¥å£å’Œå¯¼å…¥æŒ‰é’®
â”‚   â””â”€â”€ DailyLog.tsx      # æ–°å¢ï¼šæ¯æ—¥è®°å½•ä¸»é¡µé¢
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ WeekList.tsx      # æ–°å¢ï¼šå·¦ä¾§å‘¨åˆ—è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ DayEditor.tsx     # æ–°å¢ï¼šå³ä¾§æ—¥è®°ç¼–è¾‘ç»„ä»¶
â”‚   â””â”€â”€ DatePicker.tsx    # æ–°å¢ï¼šæ—¥æœŸé€‰æ‹©å™¨ç»„ä»¶
â””â”€â”€ api/
    â””â”€â”€ index.ts          # ä¿®æ”¹ï¼šå¢åŠ æ¯æ—¥è®°å½•ç›¸å…³ API
```

---

## 9. å¼€å‘è®¡åˆ’

### 9.1 ä»»åŠ¡æ‹†è§£

| é˜¶æ®µ | ä»»åŠ¡ | æ–‡ä»¶ | é¢„ä¼°å·¥æ—¶ | ä¼˜å…ˆçº§ |
|------|------|------|---------|-------|
| 1 | ç±»å‹å®šä¹‰ | `core/src/daily-log/types.ts` | 0.5h | P0 |
| 1 | æ—¥æœŸå·¥å…·å‡½æ•° | `core/src/daily-log/date-utils.ts` | 1h | P0 |
| 1 | å­˜å‚¨ç®¡ç†å™¨ | `core/src/daily-log/manager.ts` | 1.5h | P0 |
| 1 | å•å…ƒæµ‹è¯• | `core/src/daily-log/__tests__/` | 1h | P0 |
| 2 | åç«¯ API è·¯ç”± | `cli/src/server/daily-logs.ts` | 2h | P0 |
| 2 | æ³¨å†Œè·¯ç”±åˆ° server | `cli/src/server/index.ts` | 0.5h | P0 |
| 3 | æ¯æ—¥è®°å½•ä¸»é¡µé¢ | `web/src/pages/DailyLog.tsx` | 3h | P1 |
| 3 | å‘¨åˆ—è¡¨ç»„ä»¶ | `web/src/components/WeekList.tsx` | 1.5h | P1 |
| 3 | æ—¥è®°ç¼–è¾‘ç»„ä»¶ | `web/src/components/DayEditor.tsx` | 1.5h | P1 |
| 3 | æ—¥æœŸé€‰æ‹©å™¨ | `web/src/components/DatePicker.tsx` | 1h | P1 |
| 4 | å‰ç«¯ API å°è£… | `web/src/api/index.ts` | 0.5h | P1 |
| 4 | è·¯ç”±é…ç½® | `web/src/main.tsx` | 0.5h | P1 |
| 5 | é¦–é¡µå…¥å£æŒ‰é’® | `web/src/pages/Home.tsx` | 0.5h | P1 |
| 5 | é¦–é¡µå¯¼å…¥åŠŸèƒ½ | `web/src/pages/Home.tsx` | 1h | P1 |
| 6 | CLI log å‘½ä»¤ | `cli/src/commands/log.ts` | 2h | P2 |

### 9.2 é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | åŒ…å«ä»»åŠ¡ | é¢„è®¡å®Œæˆ | äº¤ä»˜ç‰© |
|--------|---------|---------|-------|
| M1ï¼šæ ¸å¿ƒå±‚ | é˜¶æ®µ 1-2 | 1 å¤© | å­˜å‚¨åŠŸèƒ½å¯ç”¨ï¼ŒAPI å¯è°ƒç”¨ |
| M2ï¼šåŸºç¡€ UI | é˜¶æ®µ 3-4 | 1.5 å¤© | å¯æµè§ˆå’Œç¼–è¾‘æ¯æ—¥è®°å½• |
| M3ï¼šé¦–é¡µé›†æˆ | é˜¶æ®µ 5 | 0.5 å¤© | å®Œæ•´ç”¨æˆ·æµç¨‹æ‰“é€š |
| M4ï¼šCLI å¢å¼º | é˜¶æ®µ 6 | 0.5 å¤© | å‘½ä»¤è¡Œå¿«æ·è®°å½•ï¼ˆå¯é€‰ï¼‰ |

**æ€»é¢„ä¼°å·¥æ—¶ï¼šçº¦ 18 å°æ—¶ï¼ˆ3 å¤©ï¼‰**

---

## 10. æŠ€æœ¯è¦ç‚¹

### 10.1 è‡ªåŠ¨ä¿å­˜ç­–ç•¥

é‡‡ç”¨é˜²æŠ–ä¿å­˜ï¼Œé¿å…é¢‘ç¹å†™å…¥ï¼š

```typescript
const debouncedSave = useDebounceFn(
  async (record: DailyRecord) => {
    await saveDayRecord(record);
    setSaveStatus('saved');
  },
  { wait: 1000 }  // 1ç§’é˜²æŠ–
);
```

### 10.2 å‘¨è®¡ç®—é€»è¾‘

ä½¿ç”¨ ISO å‘¨æ ‡å‡†ï¼ˆå‘¨ä¸€ä¸ºæ¯å‘¨ç¬¬ä¸€å¤©ï¼‰ï¼š

```typescript
function getWeekStart(date: Date = new Date()): string {
  const d = new Date(date);
  const day = d.getDay();
  // å‘¨æ—¥(0)å¾€å‰æ¨6å¤©ï¼Œå…¶ä»–å¾€å‰æ¨(day-1)å¤©
  const diff = d.getDate() - day + (day === 0 ? -6 : 1);
  d.setDate(diff);
  d.setHours(0, 0, 0, 0);
  return d.toISOString().split('T')[0];
}
```

### 10.3 å¯¼å‡ºæ ¼å¼

å¯¼å‡ºä¸ºç³»ç»ŸæœŸæœ›çš„ Daily Log æ ¼å¼ï¼ˆåŒ…å«å¹´ä»½ï¼‰ï¼š

```
2024-12-23 | å‘¨ä¸€
Plan
- ä»»åŠ¡1
- ä»»åŠ¡2

Result
- å®Œæˆ1
- å®Œæˆ2

Issues
- é—®é¢˜1

Notes

2024-12-24 | å‘¨äºŒ
Plan
...
```

---

## 11. åç»­æ‰©å±•æ–¹å‘

ä»¥ä¸‹åŠŸèƒ½ä¸åœ¨ V1 èŒƒå›´å†…ï¼Œä½œä¸ºåç»­è¿­ä»£å‚è€ƒï¼š

| æ–¹å‘ | è¯´æ˜ |
|------|------|
| æ•°æ®å¯¼å‡º | æ”¯æŒå¯¼å‡ºä¸º Markdown æ–‡ä»¶ |
| æ•°æ®åŒæ­¥ | æ”¯æŒäº‘ç«¯å¤‡ä»½ï¼ˆå¯é€‰ï¼‰ |
| ç»Ÿè®¡åˆ†æ | æœˆåº¦/å­£åº¦å·¥ä½œé‡ç»Ÿè®¡ |
| æ¨¡æ¿é¢„è®¾ | æ”¯æŒè‡ªå®šä¹‰è¾“å…¥æ¨¡æ¿ |
| å¿«æ·è¾“å…¥ | æ”¯æŒè¯­éŸ³è¾“å…¥ã€å¿«æ·çŸ­è¯­ |
| æé†’åŠŸèƒ½ | å®šæ—¶æé†’è®°å½•ï¼ˆéœ€è¦å¸¸é©»æœåŠ¡ï¼‰ |

---

## 12. é£é™©ä¸åº”å¯¹

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|---------|
| æ•°æ®ä¸¢å¤± | ç”¨æˆ·è®°å½•ä¸¢å¤± | é‡‡ç”¨è¿½åŠ å†™å…¥ï¼Œæ¯æ¬¡ä¿å­˜éƒ½æ›´æ–°æ–‡ä»¶ |
| æ–‡ä»¶æŸå | æ— æ³•è¯»å–å†å² | åœ¨å†™å…¥å‰å¤‡ä»½ï¼Œä¿ç•™ `.bak` æ–‡ä»¶ |
| å¹¶å‘å†™å…¥ | æ•°æ®è¦†ç›– | å•ç”¨æˆ·åœºæ™¯ï¼Œæš‚ä¸è€ƒè™‘ï¼›åç»­å¯åŠ é” |

---

## é™„å½• Aï¼šå®Œæ•´ç±»å‹å®šä¹‰

```typescript
// packages/core/src/daily-log/types.ts

/**
 * å•æ¡æ¯æ—¥è®°å½•
 */
export interface DailyRecord {
  /** æ—¥æœŸ ISO æ ¼å¼ "2024-12-23" */
  date: string;
  /** æ˜ŸæœŸå‡  "å‘¨ä¸€" */
  dayOfWeek: string;
  /** è®¡åˆ’å†…å®¹ */
  plan: string[];
  /** å®Œæˆç»“æœ */
  result: string[];
  /** é‡åˆ°çš„é—®é¢˜ */
  issues: string[];
  /** å¤‡æ³¨ */
  notes: string[];
  /** åˆ›å»ºæ—¶é—´ ISO æ ¼å¼ */
  createdAt: string;
  /** æ›´æ–°æ—¶é—´ ISO æ ¼å¼ */
  updatedAt: string;
}

/**
 * å‘¨æ—¥å¿—æ–‡ä»¶ç»“æ„
 */
export interface WeeklyLogFile {
  /** æ–‡ä»¶ç‰ˆæœ¬ */
  version: 1;
  /** å¹´ä»½ */
  year: number;
  /** ISO å‘¨æ•° */
  week: number;
  /** å‘¨èµ·å§‹æ—¥æœŸï¼ˆå‘¨ä¸€ï¼‰*/
  weekStart: string;
  /** å‘¨ç»“æŸæ—¥æœŸï¼ˆå‘¨æ—¥ï¼‰*/
  weekEnd: string;
  /** æŒ‰æ—¥æœŸç´¢å¼•çš„è®°å½• */
  days: Record<string, DailyRecord>;
  /** æ–‡ä»¶åˆ›å»ºæ—¶é—´ */
  createdAt: string;
  /** æ–‡ä»¶æ›´æ–°æ—¶é—´ */
  updatedAt: string;
}

/**
 * å‘¨æ‘˜è¦ä¿¡æ¯ï¼ˆç”¨äºåˆ—è¡¨å±•ç¤ºï¼‰
 */
export interface WeekSummary {
  /** æ–‡ä»¶å */
  fileName: string;
  /** å¹´ä»½ */
  year: number;
  /** å‘¨æ•° */
  week: number;
  /** å‘¨èµ·å§‹æ—¥æœŸ */
  weekStart: string;
  /** å‘¨ç»“æŸæ—¥æœŸ */
  weekEnd: string;
  /** å·²è®°å½•å¤©æ•° */
  filledDays: number;
  /** æœ€åæ›´æ–°æ—¶é—´ */
  lastUpdated: string;
}

/**
 * è®°å½•ç»Ÿè®¡
 */
export interface WeekStats {
  /** å‘¨èµ·å§‹æ—¥æœŸ */
  weekStart: string;
  /** å‘¨ç»“æŸæ—¥æœŸ */
  weekEnd: string;
  /** å·²è®°å½•å¤©æ•° */
  filledDays: number;
  /** å·¥ä½œæ—¥å·²è®°å½•å¤©æ•° */
  weekdaysFilled: number;
  /** æ€»å¤©æ•° */
  totalDays: number;
}
```

---

## é™„å½• Bï¼šAPI è¯·æ±‚ç¤ºä¾‹

### è·å–æœ¬å‘¨è®°å½•

```bash
curl http://localhost:3000/api/daily-logs/week
```

### ä¿å­˜ä»Šæ—¥è®°å½•

```bash
curl -X POST http://localhost:3000/api/daily-logs/day/2024-12-24 \
  -H "Content-Type: application/json" \
  -d '{
    "plan": ["å®ŒæˆåŠŸèƒ½å¼€å‘", "ä»£ç å®¡æŸ¥"],
    "result": ["å®Œæˆæ ¸å¿ƒæ¨¡å—", "ä¿®å¤3ä¸ªbug"],
    "issues": ["ä¾èµ–ç‰ˆæœ¬å†²çª"],
    "notes": []
  }'
```

### å¯¼å‡ºæœ¬å‘¨æ—¥å¿—

```bash
curl http://localhost:3000/api/daily-logs/export?date=2024-12-24
```

