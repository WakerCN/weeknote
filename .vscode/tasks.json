{
  "version": "2.0.0",
  "options": {
    "shell": {
      "executable": "/bin/zsh",
      "args": ["-c"]
    },
    "env": {
      "NVM_DIR": "${env:HOME}/.nvm"
    }
  },
  "tasks": [
    // ============================================
    // üî® ÁºñËØë‰ªªÂä° (Build)
    // ============================================
    {
      "label": "Build: Core",
      "type": "shell",
      "command": "source $NVM_DIR/nvm.sh && nvm use 18 && export PATH=\"$NVM_BIN:$PATH\" && pnpm build:core",
      "group": "build",
      "icon": {
        "id": "package",
        "color": "terminal.ansiYellow"
      },
      "presentation": {
        "reveal": "silent",
        "panel": "shared"
      },
      "problemMatcher": ["$tsc"]
    },
    {
      "label": "Build: Server",
      "type": "shell",
      "command": "source $NVM_DIR/nvm.sh && nvm use 18 && export PATH=\"$NVM_BIN:$PATH\" && pnpm build:server",
      "group": "build",
      "dependsOn": ["Build: Core"],
      "icon": {
        "id": "server-process",
        "color": "terminal.ansiRed"
      },
      "presentation": {
        "reveal": "silent",
        "panel": "shared"
      },
      "problemMatcher": ["$tsc"]
    },
    // ============================================
    // üöÄ ÂêØÂä®‰ªªÂä° (Start)
    // ============================================
    {
      "label": "Start: Server",
      "type": "shell",
      "command": "source $NVM_DIR/nvm.sh && nvm use 18 && export PATH=\"$NVM_BIN:$PATH\" && pnpm start:server",
      "group": "none",
      "isBackground": true,
      "dependsOn": ["Build: Server"],
      "icon": {
        "id": "server",
        "color": "terminal.ansiGreen"
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "dev"
      },
      "problemMatcher": {
        "pattern": {
          "regexp": "^$"
        },
        "background": {
          "activeOnStart": true,
          "beginsPattern": "^.*Server.*|^.*nvm.*",
          "endsPattern": "^.*listening on port.*|^.*MongoDB connected.*"
        }
      }
    },
    {
      "label": "Start: Web",
      "type": "shell",
      "command": "source $NVM_DIR/nvm.sh && nvm use 18 && export PATH=\"$NVM_BIN:$PATH\" && pnpm dev:web",
      "group": "none",
      "isBackground": true,
      "icon": {
        "id": "globe",
        "color": "terminal.ansiBlue"
      },
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "dev"
      },
      "problemMatcher": {
        "pattern": {
          "regexp": "^$"
        },
        "background": {
          "activeOnStart": true,
          "beginsPattern": "^.*VITE.*|^.*nvm.*",
          "endsPattern": "^.*Local:.*http.*"
        }
      }
    },
    // ============================================
    // ‚ö° ÁªÑÂêà‰ªªÂä° (Combo)
    // ============================================
    {
      "label": "Dev: Start All",
      "dependsOn": ["Start: Server", "Start: Web"],
      "dependsOrder": "parallel",
      "icon": {
        "id": "rocket",
        "color": "terminal.ansiMagenta"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "problemMatcher": []
    }
  ]
}
