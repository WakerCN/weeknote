import{j as e}from"./vendor-markdown-BqRWHW3K.js";import{r as o}from"./vendor-react-C5jCz3x-.js";import{u as y,b as i}from"./vendor-utils-qCXT5GGb.js";import{i as v,j as w,t as S}from"./index-R3azcaKr.js";import"./vendor-ui-C70-qNWB.js";import"./vendor-monaco-nD5yPjNo.js";function f({label:s,hour:x,minute:n,enabled:l,onChange:d}){return e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-[#0d1117] rounded-lg border border-[#30363d]",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:a=>d({enabled:a.target.checked}),className:"w-4 h-4 rounded border-[#30363d] bg-[#161b22] text-emerald-500 focus:ring-emerald-500/20"}),e.jsx("span",{className:`text-sm ${l?"text-[#f0f6fc]":"text-[#484f58]"}`,children:s})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[e.jsx("select",{value:x,onChange:a=>d({hour:parseInt(a.target.value,10)}),disabled:!l,className:"px-2 py-1 bg-[#161b22] border border-[#30363d] rounded text-sm text-[#f0f6fc] disabled:opacity-50 disabled:cursor-not-allowed",children:Array.from({length:24},(a,r)=>e.jsx("option",{value:r,children:String(r).padStart(2,"0")},r))}),e.jsx("span",{className:"text-[#8b949e]",children:":"}),e.jsx("select",{value:n,onChange:a=>d({minute:parseInt(a.target.value,10)}),disabled:!l,className:"px-2 py-1 bg-[#161b22] border border-[#30363d] rounded text-sm text-[#f0f6fc] disabled:opacity-50 disabled:cursor-not-allowed",children:Array.from({length:60},(a,r)=>e.jsx("option",{value:r,children:String(r).padStart(2,"0")},r))})]})]})}function q(){const[s,x]=o.useState(null),[n,l]=o.useState(""),[d,a]=o.useState(!1),[r,u]=o.useState(!1),[,m]=o.useState(!1),{loading:b,refresh:g}=y(v,{onSuccess:t=>{x(t),l(t.sendKey||""),m(!1)},onError:t=>{i.error(t.message||"åŠ è½½é…ç½®å¤±è´¥")}});o.useEffect(()=>{s&&m(n!==(s.sendKey||""))},[n,s]);const p=t=>{s&&(x({...s,...t}),m(!0))},h=(t,c)=>{s&&(x({...s,schedules:{...s.schedules,[t]:{...s.schedules[t],...c}}}),m(!0))},j=async()=>{if(s){a(!0);try{const t={enabled:s.enabled,sendKey:n.trim(),schedules:s.schedules};await w(t),i.success("é…ç½®ä¿å­˜æˆåŠŸ"),await g()}catch(t){i.error(t instanceof Error?t.message:"ä¿å­˜å¤±è´¥")}finally{a(!1)}}},N=async()=>{const t=n.trim();if(!t){i.error("è¯·å…ˆè¾“å…¥ SendKey");return}u(!0);try{const c=await S(t);c.success?i.success("æµ‹è¯•æ¶ˆæ¯å‘é€æˆåŠŸï¼Œè¯·æŸ¥çœ‹å¾®ä¿¡"):i.error(c.error||"å‘é€å¤±è´¥")}catch(c){i.error(c instanceof Error?c.message:"æµ‹è¯•å¤±è´¥")}finally{u(!1)}};return b||!s?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"text-[#8b949e]",children:"åŠ è½½ä¸­..."})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("header",{className:"h-14 flex items-center px-6 bg-[#161b22] border-b border-[#30363d] shrink-0",children:e.jsx("h2",{className:"text-lg font-semibold text-[#f0f6fc]",children:"æé†’è®¾ç½®"})}),e.jsx("main",{className:"flex-1 overflow-auto p-6",children:e.jsxs("div",{className:"max-w-3xl space-y-6",children:[e.jsx("section",{className:"bg-[#161b22] rounded-lg border border-[#30363d] p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-[#f0f6fc]",children:"å¯ç”¨æé†’"}),e.jsx("p",{className:"text-sm text-[#8b949e] mt-1",children:"å¼€å¯åï¼Œå°†åœ¨æ³•å®šå·¥ä½œæ—¥é€šè¿‡å¾®ä¿¡æ¨é€æé†’ä½ å¡«å†™å·¥ä½œæ—¥å¿—"}),e.jsx("p",{className:"text-xs text-[#484f58] mt-1",children:"ğŸ’¡ è‡ªåŠ¨è·³è¿‡èŠ‚å‡æ—¥ï¼ŒåŒ…å«è°ƒä¼‘å·¥ä½œæ—¥"})]}),e.jsx("button",{onClick:()=>p({enabled:!s.enabled}),className:`
                  relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent 
                  transition-colors duration-200 ease-in-out focus:outline-none
                  ${s.enabled?"bg-emerald-500":"bg-[#484f58]"}
                `,children:e.jsx("span",{className:`
                    pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow-lg ring-0 
                    transition duration-200 ease-in-out
                    ${s.enabled?"translate-x-5":"translate-x-0"}
                  `})})]})}),e.jsxs("section",{className:"bg-[#161b22] rounded-lg border border-[#30363d] p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-[#f0f6fc] mb-2",children:"Serveré…±"}),e.jsx("p",{className:"text-sm text-[#8b949e] mb-4",children:"é€šè¿‡ Serveré…± å‘å¾®ä¿¡æ¨é€æ¶ˆæ¯ï¼Œæ¯å¤©å…è´¹ 5 æ¡"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-[#8b949e] mb-2",children:"SendKey"}),e.jsx("input",{type:"text",value:n,onChange:t=>l(t.target.value),placeholder:"SCTxxxxxxxxxxxxxxxxxxx",className:"w-full px-3 py-2 bg-[#0d1117] border border-[#30363d] rounded-lg text-[#f0f6fc] placeholder-[#484f58] focus:outline-none focus:border-[#58a6ff]"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-[#484f58]",children:["ğŸ’¡ è®¿é—®"," ",e.jsx("a",{href:"https://sct.ftqq.com/",target:"_blank",rel:"noopener noreferrer",className:"text-[#58a6ff] hover:underline",children:"sct.ftqq.com"})," ","ç”¨ GitHub ç™»å½•è·å– SendKey"]}),e.jsx("button",{onClick:N,disabled:r||!n.trim(),className:`
                    px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
                    ${r||!n.trim()?"bg-[#21262d] text-[#484f58] cursor-not-allowed":"bg-[#21262d] text-[#f0f6fc] hover:bg-[#30363d]"}
                  `,children:r?"å‘é€ä¸­...":"æµ‹è¯•"})]})]})]}),e.jsxs("section",{className:"bg-[#161b22] rounded-lg border border-[#30363d] p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-[#f0f6fc] mb-2",children:"æé†’æ—¶é—´"}),e.jsx("p",{className:"text-sm text-[#8b949e] mb-4",children:"è®¾ç½®æ¯å¤©çš„æé†’æ—¶é—´"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{label:"ä¸Šåˆæé†’",hour:s.schedules.morning.hour,minute:s.schedules.morning.minute,enabled:s.schedules.morning.enabled,onChange:t=>h("morning",t)}),e.jsx(f,{label:"æ™šé—´æé†’",hour:s.schedules.evening.hour,minute:s.schedules.evening.minute,enabled:s.schedules.evening.enabled,onChange:t=>h("evening",t)})]})]}),e.jsxs("section",{className:"bg-[#161b22] rounded-lg border border-[#30363d] p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-[#f0f6fc] mb-2",children:"èŠ‚å‡æ—¥æ•°æ®"}),s.holidayData?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-400",children:"âœ“"}),e.jsxs("span",{className:"text-[#f0f6fc]",children:[s.holidayData.year,"å¹´æ•°æ®å·²åŠ è½½"]})]}),e.jsxs("p",{className:"text-sm text-[#8b949e]",children:["æ•°æ®æ¥æºï¼š",s.holidayData.source]}),e.jsxs("p",{className:"text-xs text-[#484f58]",children:["æ›´æ–°æ—¶é—´ï¼š",s.holidayData.updatedAt," Â·",s.holidayData.holidaysCount," ä¸ªèŠ‚å‡æ—¥ Â·",s.holidayData.workdaysCount," ä¸ªè°ƒä¼‘å·¥ä½œæ—¥"]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"âš "}),e.jsx("span",{className:"text-[#8b949e]",children:"å½“å‰å¹´ä»½æš‚æ— èŠ‚å‡æ—¥æ•°æ®ï¼Œå°†ä½¿ç”¨å‘¨æœ«åˆ¤æ–­"})]})]}),e.jsxs("section",{className:"bg-[#161b22] rounded-lg border border-[#30363d] p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-[#f0f6fc] mb-2",children:"å®šæ—¶ä»»åŠ¡çŠ¶æ€"}),e.jsx("div",{className:"flex items-center gap-2",children:s.scheduler.running?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-emerald-400",children:"è¿è¡Œä¸­"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#484f58]"}),e.jsx("span",{className:"text-[#8b949e]",children:"æœªè¿è¡Œ"})]})}),!s.scheduler.running&&s.enabled&&e.jsx("p",{className:"text-xs text-yellow-400 mt-2",children:"ğŸ’¡ ä¿å­˜é…ç½®åå®šæ—¶ä»»åŠ¡å°†è‡ªåŠ¨å¯åŠ¨"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:j,disabled:d,className:`
                px-6 py-2 rounded-lg font-medium transition-all duration-200
                ${d?"bg-[#21262d] text-[#484f58] cursor-not-allowed":"bg-[#238636] text-white hover:bg-[#2ea043]"}
              `,children:d?"ä¿å­˜ä¸­...":"ä¿å­˜"})})]})})]})}export{q as default};
